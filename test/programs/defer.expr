// This file is for testing defer

// When in main scope, `defer` is a macro for `onexit`
defer println("im actually at the end")

func printStuff(int k) (int j) {
  for i := 0, i < k, i++ {
    onexit println("on exit", i)

    // `defer` is the a macro for `onreturn` in functions
    defer println("on return", i)

    onleave println("on leave", i)
  }

  return j
}

println("me first")

println(printStuff(3))

defer println("im actually at the start")
